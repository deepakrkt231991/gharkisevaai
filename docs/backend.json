
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the GrihSevaAI app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "phone": {
          "type": "string",
          "description": "User's phone number."
        },
        "address": {
          "type": "string",
          "description": "User's address."
        },
        "userType": {
          "type": "string",
          "description": "Type of user.",
          "enum": ["customer", "worker", "doctor"]
        }
      },
      "required": ["id", "userType"]
    },
    "Job": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Job",
      "type": "object",
      "description": "Represents a job booking in the GrihSevaAI app.",
      "properties": {
        "jobId": {
          "type": "string",
          "description": "Unique identifier for the job."
        },
        "customerId": {
          "type": "string",
          "description": "ID of the customer who created the job."
        },
        "workerId": {
            "type": "string",
            "description": "ID of the worker assigned to the job."
        },
        "problem_image_url": {
          "type": "string",
          "description": "URL of the uploaded problem image."
        },
        "completion_image_url": {
            "type": "string",
            "description": "URL of the image uploaded by the worker upon completion."
        },
        "ai_diagnosis": {
          "type": "string",
          "description": "Diagnosis provided by the AI."
        },
        "estimated_cost": {
          "type": "string",
          "description": "Estimated cost provided by the AI."
        },
        "final_cost": {
            "type": "number",
            "description": "The final agreed-upon cost for the job."
        },
        "paymentId": {
            "type": "string",
            "description": "ID of the payment transaction from the payment gateway."
        },
        "paymentStatus": {
            "type": "string",
            "enum": ["pending", "held_in_escrow", "paid_to_worker", "refunded"],
            "description": "The status of the payment."
        },
        "status": {
          "type": "string",
          "description": "Current status of the job.",
          "enum": ["pending_diagnosis", "awaiting_payment", "worker_assigned", "in_progress", "pending_confirmation", "completed", "disputed", "cancelled"]
        }
      },
      "required": ["jobId", "customerId", "status"]
    },
    "Worker": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Worker",
      "type": "object",
      "description": "Represents a service worker.",
      "properties": {
        "workerId": {
          "type": "string",
          "description": "Unique identifier for the worker (same as their userId)."
        },
        "skills": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of worker's skills (e.g., plumber, electrician)."
        },
        "rating": {
          "type": "number",
          "description": "Average rating of the worker."
        },
        "location": {
          "type": "object",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" }
          },
          "description": "Geographical location of the worker."
        },
        "isVerified": {
          "type": "boolean",
          "description": "Whether the worker is verified."
        },
        "bankDetails": {
            "type": "object",
            "description": "Bank account details for payouts.",
            "properties": {
                "accountNumber": { "type": "string" },
                "ifscCode": { "type": "string" },
                "accountHolderName": { "type": "string"}
            }
        }
      },
      "required": ["workerId", "isVerified"]
    },
    "Health": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Health",
      "type": "object",
      "description": "Stores health and medicine related information for a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "ID of the user this health record belongs to."
        },
        "medicine_name": {
          "type": "string",
          "description": "Name of the medicine."
        },
        "expiry_date": {
          "type": "string",
          "format": "date",
          "description": "Expiry date of the medicine."
        },
        "dosage_reminder": {
          "type": "string",
          "format": "date-time",
          "description": "Reminder time for the dosage."
        }
      },
      "required": ["userId", "medicine_name"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/backend/entities/User" },
          "description": "Stores user profiles."
        }
      },
      {
        "path": "/jobs/{jobId}",
        "definition": {
          "entityName": "Job",
          "schema": { "$ref": "#/backend/entities/Job" },
          "description": "Stores details of all jobs."
        }
      },
      {
        "path": "/workers/{workerId}",
        "definition": {
          "entityName": "Worker",
          "schema": { "$ref": "#/backend/entities/Worker" },
          "description": "Stores public profiles for verified workers."
        }
      },
      {
        "path": "/health/{healthId}",
        "definition": {
          "entityName": "Health",
          "schema": { "$ref": "#/backend/entities/Health" },
          "description": "Stores health and medicine data for users."
        }
      }
    ]
  }
}
